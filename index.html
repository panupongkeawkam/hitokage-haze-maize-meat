<html>
  <head>
    <title>Corndew Valley - Hitokage</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Paytone+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">
  
  </head>
  <style>
    body {
      margin: 0%;
      width: 1920px;
      height: 1080px;
      position: relative;
      overflow: hidden;
    }
    p, h2, h3 {
      line-height: 20px;
    }
    p {
      text-indent: 20px;
    }
    h2 {
      color: rgba(188, 154, 46, 100%);
      text-align: center;
    }
    h3 {
      font-style: italic;
    }

    #background1, #background2 {
      width: 100%;
      height: 100%;
      background-size: 100% 100%;
      background-repeat: no-repeat;
      position: absolute;
      background-image: url("/Game/picture/bg1.png");
    }

    .chicken {
      width: 160px;
      position: absolute;
      filter: drop-shadow(4px 10px 2px hsl(0, 0%, 0%, 20%));
    }
    .egg {
      width: 60px;
      position: absolute;
      transform-origin: bottom;
      animation: zoom-out 0.5s, dug-dig 1s infinite linear;
    }
    .chicken:hover, .egg:hover {
      filter: brightness(80%);
    }
  
    .dirt {
      background-image: url("/Game/picture/dirt2.png");
      background-size: contain;
      background-repeat: no-repeat;
      position: absolute;
      width: 140px;
      height: 140px;
    }
    .dirt:hover {
      filter: brightness(120%);
      transform: scale(1.02);
    }

    .screen {
      width: 100%;
      height: 100%;
      z-index: 1;
      position: fixed;
      background: hsl(0, 0%, 0%, 60%);
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
      animation: days-passed 0.75s;
    }
    #gamename{
      background-image:url("/Game/picture/GameName.png");
      background-size: 100%;
      background-repeat: no-repeat;
      background-position: center;
      width: 1100px;
      height: 20%;
    }
    .button { 
      width: 580px;
      height: 84px;
      background: linear-gradient(228deg, rgba(148,114,36,1) 0%, rgba(242,178,28,1) 100%);
      box-shadow: 4px 4px 0px 4px hsl(0, 0%, 0%, 20%);
      border-radius: 60px;
      margin: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #eee;
      font-size: 36px;
      text-align: center;
      text-decoration: none;
      font-family: 'Paytone One', sans-serif;
    }
    .mini-button {
      width: 200px;
      height: 64px;
      background: linear-gradient(228deg, rgba(208,174,96,1) 0%, rgba(242,178,28,1) 100%);
      box-shadow: 4px 4px 0px 4px hsl(0, 0%, 0%, 20%);
      border-radius: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #eee;
      margin: 12px;
      font-size: 24px;
      font-family: 'Paytone One', sans-serif;
      position: absolute;
      bottom: 2%;
    }
    .exit-button {
      width: 48px;
      margin: 12px;
      position: absolute;
      top: 2%;
      right: 2%;
    }
    .button:hover, .mini-button:hover, .exit-button:hover {
      transform: scale(1.05);
      filter: brightness(110%);
      cursor: pointer;
    }
    .button:active, .mini-button:active, .exit-button:active {
      transform: scale(0.9);
      cursor: pointer;
    }

    .text-box {
      z-index: 2;
      width: 840px;
      height: 720px;
      padding: 60px;
      top: 120px;
      left: 480px;
      transition: 0.25s;
      background: linear-gradient(282deg, rgba(66,33,19,1) 50%, rgba(64,44,36,1) 100%);
      position: fixed;
      transform: scale(0);
      box-shadow: 6px 6px hsl(0, 0%, 0%, 20%);
      font-family: 'Itim', cursive;
      color: #eee;
      font-size: 1.4em;
      border-radius: 60px;
      line-height: 40px;
    }
    
    #settingbutton {
      display: none;
      width: 72px;
      position: absolute;
      top: 2%;
      right: 2%;
    }
    #settingbutton:hover {
      transform: rotateZ(45deg);
      transition: 0.25s;
      filter: brightness(110%);
      cursor: pointer;
    }
    #settingbutton:active {
      transition: 0.25s;
      transform: rotateZ(1080deg);
      cursor: pointer;
    }
    #settingmenu {
      width: auto;
      padding: 12px;
      height: auto;
      top: 16px;
      right: 6.5%;
      transition: 0.25s;
      background: linear-gradient(282deg, rgba(66,33,19,1) 50%, rgba(64,44,36,1) 100%);
      position: fixed;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      transform-origin: top right;
      transform: scale(0) translateX(480px);
      box-shadow: 6px 6px hsl(0, 0%, 0%, 20%);
      font-family: 'Paytone One', sans-serif;
      color: #eee;
      font-size: 1.5em;
      border-radius: 16px;
    }

    #scoreboard {
      display: none;
      width: 1152px;
      height: 64px;
      border-radius: 32px;
      background: linear-gradient(282deg, rgba(66, 33, 19,80%) 50%, rgba(64, 44, 36, 80%) 100%);
      position: absolute;
      justify-content: flex-start;
      align-items: center;
      left: 384px;
      top: 16px;
      animation: slide-down 1s;
    }
    .scorebox {
      width: 20%;
      padding-right: 5%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      color: #eee;
      text-shadow: 2px 2px 0px black, -2px 2px 0px black, 2px -2px 0px black, -2px -2px 0px black;
      font-family: 'Paytone One', sans-serif;
    }

    .toolbar {
      width: 96px;
      display: none;
      height: auto;
      background: rgb(200, 200, 200, 40%);
      position: absolute;
      border-radius: 16px;
      animation: display 1s;
    }
    .tools {
      width: 100%;
      height: 120px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .cost {
      width: 100%;
      height: 48px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      color: #eee;
      font-family: 'Paytone One', sans-serif;
      text-shadow: 1px 1px 0px black, -1px 1px 0px black, 1px -1px 0px black, -1px -1px 0px black; 
    }

    #seed, #grow, #watercan, #sickle, #feed, #basket {
      width: 80%;
    }
    #seed:hover, #grow:hover, #watercan:hover, #sickle:hover {
      cursor: pointer;
      transition: 0.25s;
      transform: scale(1.1) translateX(8px);
      filter: brightness(120%)
    }
    #feed:hover, #basket:hover {
      cursor: pointer;
      transition: 0.25s;
      transform: scale(1.1) translateX(-8px);
      filter: brightness(120%)
    }
    #seed:active, #grow:active, #watercan:active, #sickle:active {
      cursor: pointer;
      transition: 0.25s;
      transform: scale(0.9) translateX(8px);
    }
    #feed:active, #basket:active {
      cursor: pointer;
      transition: 0.25s;
      transform: scale(0.9) translateX(-8px);
    }

    #inseminate {
      width: 70%;
      top: 10%;
      left: 15%;
      position: absolute;
      animation: sprinkle 0.5s;
    }
    #manure {
      width: 80%;
      bottom: -20%;
      position: absolute;
    }
    #corngrow0, #corngrow1 {
      width: 80%;
      left: 10%;
      bottom: 20%;
      position: absolute;
      transform-origin: bottom;
      animation: zoom-out 0.5s;
    }
    #corngrow2, #corngrow3 {
      width: 100%;
      left: 2%;
      bottom: 10%;
      position: absolute;
      transform-origin: bottom;
      animation: zoom-out 0.5s;
    }

    #clearchoice {
      width: 56%;
      height: 66%;
      padding: 2%;
      top: 15%;
      left: 20%;
      border-radius: 60px;
      transition: 0.25s;
      background: linear-gradient(282deg, rgba(66,33,19,1) 50%, rgba(64,44,36,1) 100%);
      transform: scale(0);
      text-align: center;
      box-shadow: 6px 6px hsl(0, 0%, 0%, 20%);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      flex-wrap: wrap;
      position: fixed;
    }
    .clearchoice-text {
      font-family: 'Itim', cursive;
      color: #eee;
      font-size: 3em;
      width: 100%;
      height: 16%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .clearchoice-button {
      width: 280px;
      height: 280px;
      margin: 0% 5% 0% 5%;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 60px;
      border: 20px solid rgba(188, 154, 46, 100%);
      background: rgba(168, 134, 56, 100%);
      box-shadow: 6px 6px hsl(0, 0%, 0%, 20%);
    }
    .caption {
      width: 320px;
      height: 64px;
      color: #eee;
      margin: 0% 5% 0% 5%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 3em;
      font-family: 'Itim', cursive;
      bottom: -40%;
      /* background: red; */
    }
    .clearchoice-button:hover {
      transform: scale(1.01);
      filter: brightness(110%);
      cursor: pointer;
    }

    .fire {
      width: 120px;
      position: absolute;
      transform: scale(0);
      animation: fire 0.2s alternate;
      animation-iteration-count: 40;
      transform-origin: bottom;
    }
    #smoke {
      width: 720px;
      left: 5%;
      bottom: 10%;
      opacity: 80%;
      position: absolute;
      transform: scale(0);
      animation: floating 8s linear;
    }

    .tractor {
		  position: absolute;
      width: 300px;
      opacity: 0;
      top: 58%;
      left: 26%;
      transform: translateY(-1200px); /* แทรกเตอร์มันบังแปลงเลยย้ายไปไว้ไกล */
      animation: driving 16s linear;
    }
    .tractor-body {
		  width: 88%;
      animation: vibrating-engine 100ms infinite linear alternate;
    }
    .wheel-front {
		  width: 28%;
      bottom: 5%;
      left: 9%;
      position: absolute;
      animation: spinning-wheel 1s infinite linear;
    }
    .wheel-back {
		  width: 35%;
      bottom: 5%;
      right: 14%;
      position: absolute;
      animation: spinning-wheel 1s infinite linear;
    }

    #endingtext {
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 12em;
      font-family: 'Itim', cursive;
      animation: text-ending 1s infinite;
      text-shadow: 8px 8px 4px black, -8px 8px 4px black, 8px -8px 4px black, -8px -8px 4px black;
    }

    @keyframes days-passed {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    @keyframes slide-down {
      from {transform: translateY(-128px);}
      to {transform: translateY(0px);}
    }
    @keyframes display {
      from {transform: scaleX(0);}
      to {transform: scaleX(1);}
    }
    @keyframes zoom-out {
      from {transform: scale(0);}
      to {transform: scale(1);}
    }
    @keyframes dug-dig {
      20% {transform: rotateZ(0deg);}
      40% {transform: rotateZ(-25deg);}
      60% {transform: rotateZ(25deg);}
      80% {transform: rotateZ(0deg);}
    }
    @keyframes text-ending {
      20% {transform: rotateZ(0deg);}
      40% {transform: rotateZ(-2deg);}
      60% {transform: rotateZ(2deg);}
      80% {transform: rotateZ(0deg);}
    }
    @keyframes disappear {
      0% {transform: scale(1);}
      99% {transform: scale(1);}
      100% {transform: scale(0);}
    }
    @keyframes collect {
      from {transform: translateY(0px); opacity: 1;}
      to {transform: translateY(-1200px); opacity: 1;}
    }
    @keyframes walk-step {
      0% {transform: translateX(0px) scaleX(1)}
      10% {transform: translateX(-200px) scaleX(1)}
      30% {transform: translateX(-200px) scaleX(1)}
      40% {transform: translateX(-400px) scaleX(1)}
      41% {transform: translateX(-400px) scaleX(-1)}
      50% {transform: translateX(-400px) scaleX(-1)}
      60% {transform: translateX(-200px) scaleX(-1)}
      80% {transform: translateX(-200px) scaleX(-1)}
      90% {transform: translateX(0px) scaleX(-1)}
      100% {transform: translateX(0px) scaleX(-1)}
    }
    @keyframes walk {
      50% {transform: translateX(-300px) scaleX(1);}
      51% {transform: translateX(-300px) scaleX(-1);}
      100% {transform: translateX(0px) scaleX(-1);}
    }
    @keyframes jump {
      50% {top: 74%;}
      100% {top: 76%;}
    }
    @keyframes sprinkle {
      from {transform: translateY(-32px); opacity: 0;}
      to {transform: translateY(0px); opacity: 1;}
    }
    @keyframes fire {
      from {transform: scale(1.2, 1); filter: drop-shadow(0px -32px 32px hsl(0, 100%, 50%, 100%));}
      to {transform: scale(1, 1.2); filter: drop-shadow(0px -32px 32px hsl(0, 100%, 50%, 60%));}
    }
    @keyframes floating {
      from {transform: translateY(0px) scale(1);}
      99% {transform: translateY(-128px) scale(1);}
      100% {transform: scale(0);}
    }
    @keyframes burn {
      from {filter: sepia(100%) brightness(100%); transform: scale(1);}
      99% {filter: sepia(100%) brightness(0%); transform: scale(1);}
      100% {transform: scale(0);}
    }
    @keyframes vibrating-engine {
      to {transform: translateY(4px);}
    }
    @keyframes spinning-wheel {
      to {transform: rotateZ(-360deg);}
    }
    @keyframes driving {
      0% {transform: scaleX(1) translateX(0px); opacity: 1;}
      50.9999% {transform: scaleX(1) translateX(-400px); opacity: 1;}
      51% {transform: scaleX(-1) translateX(400px) translateY(160px); opacity: 1;}
      99.99% {transform: scaleX(-1) translateX(0px) translateY(160px); opacity: 1;}
      100% {transform: scaleX(-1) translateX(0px) translateY(160px); opacity: 0;}
    }
  </style>
  <body>
    <div id="background1"></div>
    <div id="background2"></div>

    <div id="introduction" class="screen"> <!-- หน้าโหลดเกมทั้งหมด -->
      <div id="gamename"></div>
      <div class="button" onclick="startGame()">START</div> <!-- เปิดโหมดเต็มจอ fullscreen -->
      <div id="howtoplay" class="button" onclick="javascript: tutorial.style.transform = 'scale(1)'">HOW TO PLAY</div>
      <a class="button" href="landingpage.html" target="_blank">DUST PROBLEM</a>
      <!-- <div class="button" onclick="gameOver('bad')">TEST</div> -->d
    </div>

    <div id="tutorial" class="text-box">
      <h2>วิธีการเล่นและเป้าหมายของเกม</h2>
      <h3>เป้าหมายของเกม</h3>
        <p>ให้คุณปลูกข้าวโพดและเก็บไข่ให้ครบ 8 ฟอง<br></p>
      <h3>วิธีการเล่น</h3>
        <p>1. ปลูกเมล็ดข้าวโพดโดยเลือกรูปเมล็ดจากเมนูด้านซ้าย<br></p>
        <p>2. ใส่ปุ๋ยลงที่ต้นข้าวโพดโดยเลือกรูปถุงปุ๋ยจากเมนูด้านซ้าย<br></p>
        <p>3. รดน้ำลงที่ต้นข้าวโพดเพื่อให้ข้าวโพดโตขึ้นโดยเลือกรูปฝักบัวจากเมนูด้านซ้าย<br></p>
        <p>4. เมื่อข้าวโพดโตเต็มที่ให้เลือกรูปเคียวเพื่อน้ำมาเก็บเกี่ยวข้าวโพดจากเมนูด้านซ้าย<br></p>
        <p>5. เลือกวิธีการกำจัดซากข้าวโพดที่คุณต้องการ<br></p>
        <p>6. นำข้าวโพดที่เก็บเกี่ยวมาให้อาหารไก่โดยเลือกรูปอาหารไก่จากเมนูด้านขวา<br>
        <p>7. เก็บไข่ไก่หลังจากให้อาหารไก่จนไข่ไก่ครบ 8 ฟอง<br></p>
      <h3>ข้อควรระวัง</h3>
        <p>ถ้าหากเงินผู้เล่นหมดก่อนนั้นแสดงว่าผู้เล่นได้แพ้</p>
      <img class="exit-button" onclick="javascript: tutorial.style.transform = 'scale(0)'" src="/Game/picture/remove.png">
    </div>

    <img onclick="chickenFeeding(this)" class="chicken" style="top: 76%; right: 10%; animation: jump 0.5s infinite linear alternate;" src="/Game/picture/chicken.png">
    <img onclick="chickenFeeding(this)" class="chicken" style="top: 50%; right: 25%; animation: walk 8s infinite linear;" src="/Game/picture/chicken.png">
    <img onclick="chickenFeeding(this)" class="chicken" style="top: 64%; right: 15%; animation: walk-step 12s infinite linear;" src="/Game/picture/chicken.png">
    <img onclick="chickenFeeding(this)" class="chicken" style="top: 76%; right: 20%; animation: walk 6s infinite linear, jump 1s infinite ease-out;" src="/Game/picture/chicken.png">

    <div id="scoreboard">
      <div class="scorebox">
        <img src="/Game/picture/money.png" style="height: 60%; margin-right: 6%;">
        <div id="money">1000</div>
      </div>
      <div class="scorebox">
        <img src="/Game/picture/planet-earth.png" style="height: 70%; margin-right: 6%;">
        <div id="environment">100</div>
      </div>
      <div class="scorebox">
        <img src="/Game/picture/corn.png" style="height: 80%; margin-right: 6%;">
        <div id="scorecorn">0</div>
      </div>
      <div class="scorebox">
        <img src="/Game/picture/egg.png" style="height: 60%; margin-right: 6%;">
        <div id="scoreegg">0/8</div> <!-- goal -->
      </div>
    </div>

    <div class="toolbar" style="top: 204px; left: 16px;">
      <div class="tools">
        <img id="seed" onclick="pickingItem('seed')" src="/Game/picture/cornseed.png">
      </div>
      <div class="cost">
        <img src="/Game/picture/money.png" style="height: 50%; margin-right: 8%;">
        2
      </div>
      <div class="tools">
        <img id="grow" onclick="pickingItem('manure')" src="/Game/picture/grow.png">
      </div>
      <div class="cost">
        <img src="/Game/picture/money.png" style="height: 50%; margin-right: 8%;">
        9
      </div>
      <div class="tools">
        <img id="watercan" onclick="pickingItem('water')" src="/Game/picture/watercan.png">
      </div>
      <div class="cost">
        <img src="/Game/picture/money.png" style="height: 50%; margin-right: 8%;">
        3
      </div>
      <div class="tools">
        <img id="sickle" onclick="pickingItem('sickle')" src="/Game/picture/sickle.png">
      </div>
      <div class="cost">FREE</div>
    </div>

    <div class="toolbar" style="top: 372px; right: 16px;">
      <div class="tools">
        <img id="feed" onclick="pickingItem('feed')" src="/Game/picture/chicken-rice.png">
      </div>
      <div class="cost">
        <img src="/Game/picture/corn.png" style="height: 80%; margin-right: 8%;">
        2
      </div>
      <div class="tools">
        <img id="basket" onclick="pickingItem('basket')" src="/Game/picture/wicker-basket.png">
      </div>
      <div class="cost">FREE</div>
    </div>

    <div class="dirt" onclick="cornPlanting(this, 0)" style="top: 65%; left: 10%;"></div> <!-- this คือ ส่งค่า Element ไปยังฟังชัน -->
    <div class="dirt" onclick="cornPlanting(this, 1)" style="top: 64%; left: 18%;"></div>
    <div class="dirt" onclick="cornPlanting(this, 2)" style="top: 63%; left: 26%;"></div>
    <div class="dirt" onclick="cornPlanting(this, 3)" style="top: 62%; left: 34%;"></div>
    <div class="dirt" onclick="cornPlanting(this, 4)" style="top: 80%; left: 8%;"></div>
    <div class="dirt" onclick="cornPlanting(this, 5)" style="top: 79%; left: 16%;"></div>
    <div class="dirt" onclick="cornPlanting(this, 6)" style="top: 78%; left: 24%;"></div>
    <div class="dirt" onclick="cornPlanting(this, 7)" style="top: 77%; left: 32%;"></div>
 
    <div id="clearchoice"> <!-- เงื่อนไขการกำจัดซากข้าวโพด (ถูกซ่อนอยู่ โดย scale(0)) -->
      <div class="clearchoice-text">ข้าวโพดหลังจากเก็บเกี่ยวแล้วยังเหลือซากข้าวโพดอยู่<br>คุณต้องการทำลายซากข้าวโพดด้วยวิธีไหน</div>
      <div onclick="burning()" class="clearchoice-button">
        <img src="/Game/picture/fire.png" width="75%">
      </div>
      <div onclick="tractor()" class="clearchoice-button">
        <img src="/Game/picture/car.png" width="90%">
      </div>
      <div class="caption"> <!-- ค่าสิ่งแวดล้อมที่ต้องจ่าย -->
        <img src="/Game/picture/planet-earth.png" style="height: 80%; margin-right: 5%;">
        38
      </div>
      <div class="caption"> <!-- ราคาที่ต้องจ่าย -->
        <img src="/Game/picture/money.png" style="height: 70%; margin-right: 5%;">
        399
      </div>
    </div>

    <img id="settingbutton" onclick="setting()" src="/Game/picture/settings_1.png">
    <div id="settingmenu">
      <div class="mini-button" onclick="location.reload()" style="position: relative; width: 160px; height: 48px; font-size: 16px;">RESTART</div>
      <div class="mini-button" onclick="javascript: tutorial.style.transform = 'scale(1)'" style="position: relative; width: 160px; height: 48px; font-size: 16px;">HOW TO PLAY</div>
      <a class="mini-button" href="landingpage.html" target="_blank" style="position: relative; width: 160px; height: 48px; font-size: 16px; text-decoration: none;">INFORMATION</a>
    </div>

    <div id="gameover" class="screen" style="visibility: hidden;">
      <div id="endingtext"></div>
      <div style="display: flex; justify-content: center; align-items: center">
        <div class="button" onclick="javascript: showDialog(); dialog.style.transform = 'scale(1)';" style="width: 240px">Result</div>
        <div class="button" onclick="javascript: location.reload()" style="width: 240px; background: #009900;">Restart</div>
      </div>
      <div id="dialog" class="text-box" style="display: flex; justify-content: center; align-items: center; flex-direction: column; text-align: center; height: 360px; top: 300px;">
        <div id="message" style="font-size: 32px;"></div>
        <div id="learnmore" style="display: none; justify-content: center; align-items: center">
          <a class="button" href="landingpage.html" target="_blank" style="width: 240px; font-size: 24px; border-radius: 12px; background: #2c6c74;">HITOKAGE</a>
          <a class="button" href="https://www.greenpeace.org/thailand/publication/16490/food-agriculture-haze-and-maize-report/" target="_blank" style="width: 240px; background: #2c6c74; font-size: 24px; border-radius: 12px;">Greenpeace</a>
        </div>
        <img class="exit-button" onclick="javascript: dialog.style.transform = 'scale(0)'" src="/Game/picture/remove.png">
        <div id="backbutton" class="mini-button" onclick="javascript: next--; showDialog()" style="left: 2%;">Back</div>
        <div id="nextbutton" class="mini-button" onclick="javascript: next++;  showDialog()" style="right: 2%;">Next</div>
      </div>
    </div>

    <div id="errorcondition" class="text-box" style="display: flex; justify-content: center; align-items: center; flex-direction: column; text-align: center; height: 360px; top: 300px; font-size: 32px;">
      <img class="exit-button" onclick="javascript: errorcondition.style.transform = 'scale(0)'" src="/Game/picture/remove.png">
      เอ๊ะ! เหมือนคุณจะลืมให้อาหารไก่และเก็บไข่นะ<br>
      ไปให้อาหารไก่และเก็บไข่ก่อนที่จะปลูกก่อนดีกว่าไหม
    </div>

    <div id="cornfield"></div>
    <div id="chickenfield"></div>

  </body>

  <script>
    var screenwidth = screen.width / 1920;
    document.body.style.transform = `scale(${screenwidth})`;
    document.body.style.transformOrigin = 'top left';

    /* Array แสดงว่า แปลงดินไหนมีสถานะอะไรบ้าง (มี 8 แปลง) */
    var level = [0, 0, 0, 0, 0, 0, 0, 0]; // ระดับความโตของต้นข้าวโพด
    var manured = [false, false, false, false, false, false, false, false]; // สถานะว่าใส่ปุ๋ยหรือยัง (ใส่ก่อนรดน้ำ)
    var empty = [true, true, true, true, true, true, true, true]; // สถานะความว่างของแปลงดิน
    var ready = [false, false, false, false, false, false, false, false]; // สถานะพร้อมเก็บเกี่ยว
    var death = [false, false, false, false, false, false, false, false];

    var pick = "none"; // สถานะการหยิบเครื่องมือ
    var harvested = 0; // จำนวนต้นที่พร้อมเก็บเกี่ยว
    var growImage = ["/Game/picture/corngrow1.png",
                     "/Game/picture/corngrow2.png",
                     "/Game/picture/corngrow3.png",
                     "/Game/picture/corngrow4.png"
                    ]; // รูปลำดับการโตข้าวโพด

    var cursor = {seed:"url('/Game/cursor/cornseed2.png'), auto",
                  manure:"url('/Game/cursor/growCUR.png'), auto",
                  water:"url('/Game/cursor/watercanCUR.png'), auto",
                  sickle:"url('/Game/cursor/sickleCUR.png'), auto",
                  feed:"url('/Game/cursor/chicken-riceCUR.png'), auto",
                  basket:"url('/Game/cursor/wicker-basketCUR.png'), auto"
                 }; // เปลี่ยน cursor ตามชื่อ item (คล้ายๆ dict ใน Python)

    var money = 1000;
    var environment = 100;
    var scorecorn = 0;
    var scoreegg = 0;

    var next = 0; // next dialog message (index)
    var textBad = ["ยินดีด้วยคุณชนะแล้ว<br>เพราะคุณได้ยอดถึงเป้าหมายตามที่กำหนดไว้<br>แต่คุณรู้ไหมว่า?...",
                   "คุณลองดูสภาพอากาศและท้องฟ้าซิ :(<br>แม้คุณจะชนะก็ตามแต่...<br>สิ่งแวดล้อมและสภาพอากาศของคุณก็เต็มไปด้วยมลพิษ",
                   "เพราะคุณเลือกใช้การเผาแทนที่การใช้รถไถในการกำจัดซากข้าวโพด<br>จีงทำให้คุณมีต้นทุนที่ต่ำกว่าแต่...<br>สภาพอากาศและสภาพแวดล้อมของคุณก็ย่ำแย่ T_T",
                   "แต่ถ้าหากคุณเลือกใช้รถไถคุณอาจจะมีต้นทุนที่เพิ่มมากขึ้น<br>แต่คุณจะทำให้สิ่งแวดล้อมและสภาพอากาศไม่เป็นมลพิษและน่าอยู่ขึ้น",
                   "แต่ถึงยังไงคุณก็เป็นผู้ชนะเราจึงขอยินดีด้วยที่...<br>คุณได้ทำลายสภาพอากาศและสิ่งแวดล้อม<br>จากการเผาซากข้าวโพดของคุณจนทำให้อากาศเป็นมลพิษ",
                   "สามารถหาข้อมูลเพิ่มเกี่ยวกับปัญหาหมอกควันจากอุตสาหกรรมหรือ<br>Haze-Maze-Meat-Industry<br>ผ่าน Landing page ของเราหรือ Greenpeace Official ได้เลย"
                  ];
    var textGood = ["เสียใจด้วยคุณแพ้แล้ว<br>เพราะคุณได้ยอดไม่ถึงเป้าหมายตามที่กำหนดไว้<br>แต่คุณรู้ไหมว่า?...",
                   "คุณลองดูสภาพอากาศและท้องฟ้าซิ :D<br>แม้คุณจะแพ้แต่...<br>สภาพอากาศและท้องฟ้าของคุณก็แจ่มใส",
                   "เพราะคุณเลือกใช้รถไถแทนการเผาในการกำจัดซากข้าวโพด<br>แม้จะมีต้นทุนที่สูงแต่ก็ช่วยให้สภาพอากาศน่าอยู่ขึ้น",
                   "แต่ถ้าคุณเลือกการเผาต้นทุนของคุณจะน้อยลงแต่...<br>สิ่งแวดล้อมแถวนั้นจะเต็มไปด้วยมลพิษและไม่น่าอยู่",
                   "ดังนั้นไม่ต้องเสียใจที่คุณแพ้และกำไรน้อย<br>เพราะคุณคือหนึ่งในคนที่ช่วยรักษาสิ่งแวดล้อมให้แก่โลกของเรา :)",
                   "สามารถหาข้อมูลเพิ่มเกี่ยวกับปัญหาหมอกควันจากอุตสาหกรรมหรือ<br>Haze-Maze-Meat-Industry<br>ผ่าน Landing page ของเราหรือ Greenpeace Official ได้เลย"
                  ];

    function startGame() {
      introduction.style.visibility = `hidden`;
      scoreboard.style.display = `flex`;
      settingbutton.style.display = "initial";
      document.getElementsByClassName("toolbar")[0].style.display = `initial`;
      document.getElementsByClassName("toolbar")[1].style.display = `initial`;
    }

    function pickingItem(item) { // หยิบไอเท็ม
      if (pick == item) { // ถ้ายังหยิบไอเท็มเดิมอยู่ให้ ทำมือให้ว่าง
        pick = "none";
        document.body.style.cursor = "initial";
      } else { // common condition
        pick = item;
        document.body.style.cursor = cursor[item]; 
      }
    }

    function cornPlanting(obj, n) { // obj คือค่า Elements ที่รับมากจาก HTMl, n คือ ทำแหน่งของแปลงนั้นๆ (0-5)
      if (pick == "seed" && empty[n]) { // เช็คว่าหยิบเมล็ดอยู่ และแปลงดินว่างไหม
        if ((scorecorn != 0 || stillegg) && cleared) {
          errorcondition.style.transform = "scale(1)";
          return 0;
        }
        cleared = false;
        obj.innerHTML = `<img id="inseminate" src="/Game/picture/corngrow.png">`;
        money -= 2;
        checkMoney();
        empty[n] = false; // ทำให้แปลงดินไม่ว่าง
      } else if (pick == "water" && manured[n] && !empty[n] && !ready[n]) { // เช็คว่าหยิบน้ำ และใส่ปุ๋ยแล้ว และแปลงดิน *ไม่* ว่าง และข้าวโพดยังไม่พร้อมเก็บ
        obj.innerHTML = `<img id="corngrow${level[n]}" src="${growImage[level[n]]}">`;
        money -= 3;
        checkMoney();
        manured[n] = false; // ให้ค่าใส่ปุ๋ยแล้วเป็นเท็จ
        if (level[n] == 3) { // ถ้าค่าความโตเท่ากับ 4 ให้ทำ สถานะข้าวโพดพร้อมเก็บเกี่ยว
          ready[n] = true; // สถานะพร้อมเก็บเกี่ยวเป็นจริง
          level[n] = 0; // รีเซ็ตค่าความโต
        } else { // common condition
          level[n]++; // เพิ่มระดับการโตเพื่อใช้ในรอบถัดไป
        }
      } else if (pick == "manure" && !manured[n] && !empty[n] && !ready[n] && !death[n]) {
        obj.innerHTML += `<img id="manure" src="/Game/picture/soil-for-growing-plants-pile-ground-heap-of-vector-35431631-removebg-preview.png">`; // แสดงปุ๋ยในแปลง
        money -= 9;
        checkMoney();
        manured[n] = true; // ให้ค่าใส่ปุ๋ยแล้วเป็นจริง
      } else if (pick == "sickle" && ready[n]) {
        obj.innerHTML = `<img id="corngrow2" src="${growImage[2]}" style="filter: sepia(100%)">`; // แสดงต้นข้าวโพดที่แห้งแล้ว (เหลือแต่ซาก)
        scorecorn++; // ข้าวโพดเพิ่ม 1
        document.getElementById("scorecorn").innerText = scorecorn;
        ready[n] = false; // รีเซ็ตค่า
        death[n] = true;
        harvested++; // เพิ่มต้นที่เก็บแล้ว
        if (harvested == 8) { // เงื่อนไขที่เตรียมเก็บเกี่ยวฟาร์ม
          harvested = 0; // รีเซ็ตค่าเก็บเกี่ยวแล้ว
          clearCorn(); // เรียก fn() แสดงเงื่อนไขการทำลายซาก
        }
      } 
    }

    function checkMoney() {
      document.getElementById("money").innerText = money;
      if (money <= 0) {
        gameOver("good");
      }
    }

    var stillegg = false;

    function chickenFeeding(obj) {
      if (pick == "feed" && scorecorn >= 2) {
        var egg = document.createElement("IMG");
        egg.setAttribute("class", "egg");
        egg.setAttribute("onclick", "collectEgg(this)");
        egg.setAttribute("style", `top: ${60 + Math.floor(Math.random() * 30)}%; right: ${10 + Math.floor(Math.random() * 35)}%`);
        egg.setAttribute("src", "/Game/picture/egg.png");
        chickenfield.appendChild(egg);
        scorecorn -= 2;
        document.getElementById("scorecorn").innerText = scorecorn;
      }
      stillegg = true;
    }

    function collectEgg(obj) {
      if (pick == "basket") {
        scoreegg++;
        obj.style.transform = "translateY(-1200px)";
        obj.style.opacity = "0";
        obj.style.animation = "collect 2s";
        document.getElementById("scoreegg").innerText = `${scoreegg}/8`;
        if (scoreegg == 8) {
          gameOver("bad");
        }
        if (scoreegg == 4) {
          stillegg = false;
        }
      }
    }

    var cleared = false;

    function clearCorn() {
      clearchoice.style.transform = "scale(1)"; // แสดงเงื่อนไขการเก็บเกี่ยว
      cleared = true;
      if (money < 399) {
        document.getElementsByClassName("clearchoice-button")[1].style.filter = "grayscale(100%)";
        document.getElementsByClassName("caption")[1].style.color = "red";
      }
    }

    function burning() {
      clearchoice.style.transform = "scale(0)"; // ซ่อนเงื่อนไขการเก็บเกี่ยว 
      document.getElementById("environment").innerText = environment-=38; // สิ่งแวดล้อมลด
      cornfield.innerHTML += `<img id="smoke" src="/Game/picture/Pngtreesmoke_cartoon_creative_smoke_brush_3846011.png">`; // ควัน
      background2.style.animation = "days-passed 8s"; // เปลี่ยนพื้นหลัง
      background2.style.filter = "grayscale(40%) sepia(10%)"; // เปลี่ยนพื้นหลัง
      background2.style.backgroundImage = "url('/Game/picture/bg2.png')"; // เปลี่ยนพื้นหลัง
      if (environment <= 24) {
        background1.style.filter = "grayscale(80%) sepia(20%)"; // เปลี่ยนพื้นหลัง
        background1.style.backgroundImage = "url('/Game/picture/bg2.png')";
        background2.style.transition = "8s"; // เปลี่ยนพื้นหลัง
        background2.style.filter = "opacity(40%)"; // เปลี่ยนพื้นหลัง
        background2.style.backgroundImage = "url('/Game/picture/bg3.png')"; // เปลี่ยนพื้นหลัง
      }
      for (let i=0; i<8; i++) {
        empty[i] = true; // ให้ดินทุกแปลงว่าง
        death[i] = false;
        document.getElementsByClassName("dirt")[i].innerHTML = `<img id="corngrow2" src="${growImage[2]}" style="transform: scale(0); animation: burn 8s linear;">`; // ต้นข้าวโพดที่ไหม้เกรียม
        document.getElementsByClassName("dirt")[i].innerHTML += `<img class="fire" style="width:${100 + Math.floor(Math.random() * 41)}px" src="/Game/picture/fire.png">`; // ไฟ
      }
    }

    function tractor() {
      if (money < 399) {
        return 0;
      }
      clearchoice.style.transform = "scale(0)"; // ซ่อนเงื่อนไขการเก็บเกี่ยว
      let dirt = [3, 2, 1, 0, 4, 5, 6, 7], timing = [1, 3, 5, 7.5, 9, 11, 13, 15.5]; // dirt คือตำแหน่งของ class 'dirt' ที่เรียงตามรถไถวิ่งผ่าน, timing คือ เวลาที่จะให้ข้าวโพดหายไป
      document.getElementById("money").innerText = money-=399;
      cornfield.innerHTML += `<div class="tractor">
                                    <img class="tractor-body" src="/Game/picture/car.png">
                                    <img class="wheel-front" src="/Game/picture/vector-tractor-tire-illustration-removebg-preview.png">
                                    <img class="wheel-back" src="/Game/picture/vector-tractor-tire-illustration-removebg-preview.png">
                                  </div>`;
      for (let i=0; i<8; i++) { // loop เพื่อลดบรรทัด
        empty[i] = true; // ให้ดินทุกแปลงว่าง
        death[i] = false;
        document.getElementsByClassName("dirt")[dirt[i]].innerHTML = `<img id="corngrow2" src="${growImage[2]}" style="filter: sepia(100%); transform: scale(0); animation: disappear ${timing[i]}s;">`; // ใส่ animation ให้ต้นโพดค่อยๆ หาย
      }
    }

    var show = true;

    function setting() {
      if (show) {
        settingmenu.style.transform = 'scale(1) translateX(0px)';
        show = false;
      } else {
        settingmenu.style.transform = 'scale(0) translateX(480px)';
        show = true;
      }
    }

    function gameOver(ending) {
      gameover.style.visibility = "visible";
      document.body.style.cursor = "initial";
      if (ending == "bad") {
        endingtext.innerText = "You Won";
        endingtext.style.color = "green";
      } else if (ending == "good") {
        endingtext.innerText = "You Failed";
        endingtext.style.color = "red";
      }
    }

    function showDialog() {
      if (endingtext.innerText === "You Won") {
        message.innerHTML = `${textBad[next]}`;
      } else if (endingtext.innerText === "You Failed") { 
        message.innerHTML = `${textGood[next]}`;
      }
      if (next < 5) {
        learnmore.style.display = "none";
        nextbutton.style.visibility = "visible";
      }
      if (next == 5) {
        learnmore.style.display = "flex";
        nextbutton.style.visibility = "hidden";
      }
      if (next >= 1) {
        backbutton.style.visibility = "visible";
      }
      if (next == 0) {
        backbutton.style.visibility = "hidden";
      }
    }
  </script>
</html>
© 2021 GitHub, Inc.
